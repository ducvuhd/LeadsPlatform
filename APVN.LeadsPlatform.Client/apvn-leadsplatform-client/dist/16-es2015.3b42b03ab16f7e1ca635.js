(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"9lTy":function(e,t,i){"use strict";i.r(t),i.d(t,"ShiftExchangeEmployeeModule",function(){return me});var c=i("ofXK"),n=i("tyNb"),o=i("AytR"),s=i("fXoL"),a=i("N+K7");let l=(()=>{class e{constructor(e){this.httpService=e}getList(e){return this.httpService.doPost(o.a.API_URL+"/shift-exchange-employee/get-list",e)}getListSchedule(e){return this.httpService.doPost(o.a.API_URL+"/shift-exchange-employee/get-list-schedule",e)}getListOffLeave(e){return this.httpService.doPost(o.a.API_URL+"/shift-exchange-employee/get-list-off-leave",e)}init(e){return this.httpService.doGet(o.a.API_URL+"/shift-exchange-employee/init?employeeId="+e)}initCreate(e){return this.httpService.doGet(o.a.API_URL+"/shift-exchange-employee/init-create/"+e)}initEdit(e,t){return this.httpService.doGet(o.a.API_URL+"/shift-exchange-employee/get-by-employee-work-date?employeeId="+e+"&workDate="+t)}save(e){return this.httpService.doPost(o.a.API_URL+"/shift-exchange-employee/save",e)}deleteExchange(e){return this.httpService.doPost(o.a.API_URL+"/shift-exchange-employee/delete/"+e)}deleteOffLeave(e){return this.httpService.doPost(o.a.API_URL+"/shift-exchange-employee/delete-off-leave/"+e)}deleteExchangeAndOffLeave(e,t){return this.httpService.doPost(o.a.API_URL+"/shift-exchange-employee/delete-exchange-offleave?employeeId="+e+"&workDate="+t)}getShiftCategoryByEmployee(e){return this.httpService.doGet(o.a.API_URL+"/shift-exchange-employee/get-shift-category-by-employee-id/"+e)}getDepartment(e){return this.httpService.doGet(o.a.API_URL+"/shift-exchange-employee/get-department/"+e)}getUsers(e){return this.httpService.doGet(o.a.API_URL+"/shift-exchange-employee/get-users/"+e)}uploadFileShiftRegister(e){return this.httpService.doPostFile(o.a.API_URL+"/shift-exchange-employee/upload-shift-schedule",e)}}return e.\u0275fac=function(t){return new(t||e)(s.kc(a.a))},e.\u0275prov=s.Wb({token:e,factory:e.\u0275fac}),e})();var f=i("Sw6W");class r{constructor(){this.employeeId=0}}class h{constructor(){this.listUser=[],this.listCity=[],this.listDepartment=[]}}var d=i("GHWL"),g=i("w2sg"),m=i("kwj3"),p=i("p1Xr"),y=i("5eHb"),u=i("3Pt+"),v=i("44PX"),S=i("K3ix");const b=["warningImportExcel"];function I(e,t){if(1&e&&(s.gc(0,"option",34),s.Uc(1),s.fc()),2&e){const e=t.$implicit;s.zc("value",e.id),s.Ob(1),s.Vc(e.cityName)}}function C(e,t){if(1&e&&(s.gc(0,"option",34),s.Uc(1),s.fc()),2&e){const e=t.$implicit;s.zc("value",e.id),s.Ob(1),s.Vc(e.name)}}function D(e,t){if(1&e&&(s.gc(0,"option",34),s.Uc(1),s.fc()),2&e){const e=t.$implicit;s.zc("value",e.employeeId),s.Ob(1),s.Vc(e.userName)}}function O(e,t){if(1&e){const e=s.hc();s.gc(0,"div",1),s.gc(1,"div",35),s.gc(2,"dl"),s.gc(3,"dd"),s.bc(4,"input",36,37),s.fc(),s.fc(),s.fc(),s.gc(6,"div",35),s.gc(7,"div",7),s.gc(8,"button",11),s.nc("click",function(){s.Lc(e);const t=s.Ic(5);return s.rc().uploadFile(t.files)}),s.bc(9,"i",38),s.Uc(10," \xa0 Import ca l\xe0m vi\u1ec7c t\u1eeb excel "),s.fc(),s.fc(),s.fc(),s.fc()}}function T(e,t){if(1&e){const e=s.hc();s.gc(0,"button",39),s.nc("click",function(){return s.Lc(e),s.rc().create()}),s.bc(1,"i",40),s.Uc(2," \u0110\u0103ng k\xed th\u1eddi gian l\xe0m vi\u1ec7c "),s.fc()}}function U(e,t){if(1&e&&(s.gc(0,"a",47),s.sc(1,"date"),s.bc(2,"i",48),s.fc()),2&e){const e=s.rc().$implicit,t=s.rc();s.Bc("href","/shift-exchange-employee/edit?employeeId=",t.searchedEmployeeId,"&workDate=",s.uc(1,2,e.dayInMonth,"yyyy-MM-dd"),"",s.Nc)}}function E(e,t){if(1&e){const e=s.hc();s.gc(0,"a",49),s.nc("click",function(){s.Lc(e);const t=s.rc().$implicit;return s.rc().delete_exchange_offleave(t.employeeId,t.dayInMonthString)}),s.bc(1,"i",50),s.fc()}}function M(e,t){if(1&e&&(s.gc(0,"span",53),s.Uc(1),s.fc()),2&e){const e=t.$implicit;s.Ob(1),s.Xc(" ",e.fromTimeInString," - ",e.toTimeInString," ")}}const w=function(e,t){return{badge:!0,"badge-danger":e,"badge-info":t}};function L(e,t){if(1&e&&(s.gc(0,"span",54),s.Uc(1),s.fc()),2&e){const e=t.$implicit;s.yc("ngClass",s.Ec(2,w,101!=e.offType&&122!=e.offType,101==e.offType||122==e.offType)),s.Ob(1),s.Wc(" ",e.offTypeName," ")}}function x(e,t){if(1&e&&(s.gc(0,"td"),s.Sc(1,M,2,2,"span",51),s.Sc(2,L,2,5,"span",52),s.fc()),2&e){const e=s.rc().$implicit;s.Ob(1),s.yc("ngForOf",e.listSchedule),s.Ob(1),s.yc("ngForOf",e.listShiftOffLeave)}}function F(e,t){if(1&e&&(s.gc(0,"a",47),s.sc(1,"date"),s.bc(2,"i",48),s.fc()),2&e){const e=s.rc().$implicit,t=s.rc();s.Bc("href","/shift-exchange-employee/edit?employeeId=",t.searchedEmployeeId,"&workDate=",s.uc(1,2,e.dayInMonth,"yyyy-MM-dd"),"",s.Nc)}}function k(e,t){if(1&e){const e=s.hc();s.gc(0,"a",49),s.nc("click",function(){s.Lc(e);const t=s.rc().$implicit;return s.rc().delete_exchange_offleave(t.employeeId,t.dayInMonthString)}),s.bc(1,"i",50),s.fc()}}function P(e,t){1&e&&(s.gc(0,"td"),s.gc(1,"span",55),s.Uc(2," Kh\xf4ng x\xe1c \u0111\u1ecbnh "),s.fc(),s.fc())}function N(e,t){if(1&e&&(s.gc(0,"tr"),s.gc(1,"td"),s.gc(2,"div",41),s.Uc(3),s.sc(4,"date"),s.fc(),s.gc(5,"div",42),s.Sc(6,U,3,5,"a",43),s.Uc(7," \xa0 "),s.Sc(8,E,2,0,"a",44),s.fc(),s.fc(),s.Sc(9,x,3,2,"td",45),s.gc(10,"td",21),s.Sc(11,F,3,5,"a",43),s.Uc(12," \xa0 "),s.Sc(13,k,2,0,"a",44),s.fc(),s.Sc(14,P,3,0,"ng-template",null,46,s.Tc),s.fc()),2&e){const e=t.$implicit,i=s.Ic(15),c=s.rc();s.Ob(3),s.Wc(" ",s.uc(4,7,e.dayInMonth,"dd/MM/yyyy")," "),s.Ob(3),s.yc("ngIf",c.checkShiftTeamLead),s.Ob(2),s.yc("ngIf",c.checkShiftTeamLead&&(e.listSchedule.length>0||e.listShiftOffLeave.length>0)),s.Ob(1),s.yc("ngIf",e.listSchedule.length>0||e.listShiftOffLeave.length>0)("ngIfElse",i),s.Ob(2),s.yc("ngIf",c.checkShiftTeamLead),s.Ob(2),s.yc("ngIf",c.checkShiftTeamLead&&(e.listSchedule.length>0||e.listShiftOffLeave.length>0))}}function A(e,t){if(1&e&&(s.gc(0,"span"),s.Uc(1,"Ng\xe0y "),s.gc(2,"b"),s.Uc(3),s.sc(4,"date"),s.fc(),s.Uc(5," :"),s.fc()),2&e){const e=s.rc().$implicit;s.Ob(3),s.Vc(s.uc(4,1,e.processDate,"dd/MM/yyyy"))}}function R(e,t){if(1&e&&(s.gc(0,"p",57),s.Sc(1,A,6,4,"span",58),s.Uc(2),s.fc()),2&e){const e=t.$implicit;s.Ob(1),s.yc("ngIf",null!=e.processDate),s.Ob(1),s.Wc(" ",e.message," ")}}function _(e,t){if(1&e&&(s.gc(0,"div"),s.gc(1,"p"),s.Uc(2,"Nh\xe2n vi\xean "),s.gc(3,"b"),s.Uc(4),s.fc(),s.fc(),s.Sc(5,R,3,2,"p",56),s.fc()),2&e){const e=t.$implicit;s.Ob(4),s.Xc("",e.fullName,"(",e.employeeCode,")"),s.Ob(1),s.yc("ngForOf",e.listMessage)}}let B=(()=>{class e{constructor(e,t,i,c){this.router=e,this.activatedRoute=t,this.shiftExchangeEmployeeService=i,this.toastr=c,this.initData=new h,this.lstSchedule=[],this.lstShiftExchange=[],this.lstOffLeave=[],this.filterCondition=new r,this.activedTab=1,this.listMessage=[]}ngOnInit(){this.checkShiftTeamLead=p.a.hasRole(m.a.Coordinate);let e=localStorage.getItem(d.a.TokenKey);g.a.decodeToken(e),this.activatedRoute.queryParams.subscribe(e=>{if(this.filterCondition.employeeId=void 0===e.employeeId?0:parseInt(e.employeeId,10),void 0===e.month){let e=new Date;this.filterCondition.monthInFormat=e.getFullYear()+"-"+(e.getMonth()+1>10?e.getMonth()+1:"0"+(e.getMonth()+1))}else{const t=e.month.substring(0,4),i=e.month.replace(t,"");this.filterCondition.monthInFormat=t+"-"+i}}),this.shiftExchangeEmployeeService.init(this.filterCondition.employeeId).subscribe(e=>{null!=e&&(this.initData=e,0==this.filterCondition.employeeId?(null!=this.initData.listCity&&this.initData.listCity.length>0&&(this.filterCondition.cityId=this.initData.listCity[0].id),null!=this.initData.listDepartment&&this.initData.listDepartment.length>0&&(this.filterCondition.departmentId=this.initData.listDepartment[0].id),null!=this.initData.listUser&&this.initData.listUser.length>0&&(this.filterCondition.employeeId=this.initData.listUser[0].employeeId)):(this.filterCondition.cityId=this.initData.selectCityId,this.filterCondition.departmentId=this.initData.selectDepartmentId),this.checkTabAndSearch())})}checkTabAndSearch(){1===this.activedTab?this.search():2===this.activedTab?this.getListSchedule():this.getListOffLeave()}search(){this.filterCondition.employeeId=parseInt(this.filterCondition.employeeId.toString(),10),this.filterCondition.month=parseInt(this.filterCondition.monthInFormat.replace("-",""),10),this.shiftExchangeEmployeeService.getList(this.filterCondition).subscribe(e=>{e.code===f.a.Success?(this.lstSchedule=e.data,null!=this.lstSchedule&&this.lstSchedule.length>0&&this.lstSchedule.map((e,t)=>{e.dayInMonthString=new c.e("en-US").transform(e.dayInMonth,"yyyy-MM-dd")}),this.searchedEmployeeId=this.filterCondition.employeeId):e.code===f.a.Error?this.toastr.error(e.message):this.toastr.warning(e.message)})}getListSchedule(){this.filterCondition.employeeId=parseInt(this.filterCondition.employeeId.toString(),10),this.filterCondition.month=parseInt(this.filterCondition.monthInFormat.replace("-",""),10),this.shiftExchangeEmployeeService.getListSchedule(this.filterCondition).subscribe(e=>{e.code===f.a.Success?(this.lstShiftExchange=e.data,this.searchedEmployeeId=this.filterCondition.employeeId):e.code===f.a.Error?this.toastr.error(e.message):this.toastr.warning(e.message)})}getListOffLeave(){this.filterCondition.employeeId=parseInt(this.filterCondition.employeeId.toString(),10),this.filterCondition.month=parseInt(this.filterCondition.monthInFormat.replace("-",""),10),this.shiftExchangeEmployeeService.getListOffLeave(this.filterCondition).subscribe(e=>{e.code===f.a.Success?(this.lstOffLeave=e.data,this.searchedEmployeeId=this.filterCondition.employeeId):e.code===f.a.Error?this.toastr.error(e.message):this.toastr.warning(e.message)})}create(){this.router.navigateByUrl("/shift-exchange-employee/create?employeeId="+this.searchedEmployeeId)}delete_exchange(e){confirm("B\u1ea1n c\xf3 mu\u1ed1n x\xf3a th\u1eddi gian \u0111\u0103ng k\xed n\xe0y ?")&&this.shiftExchangeEmployeeService.deleteExchange(e).subscribe(e=>{e.code===f.a.Success?(this.toastr.success(e.message),this.checkTabAndSearch()):e.code===f.a.Error?this.toastr.error(e.message):this.toastr.warning(e.message)})}delete_offleave(e){confirm("B\u1ea1n c\xf3 mu\u1ed1n x\xf3a m\xe3 ph\xe9p \u0111\xe3 t\u1ea1o n\xe0y ?")&&this.shiftExchangeEmployeeService.deleteOffLeave(e).subscribe(e=>{e.code===f.a.Success?(this.toastr.success(e.message),this.checkTabAndSearch()):e.code===f.a.Error?this.toastr.error(e.message):this.toastr.warning(e.message)})}delete_exchange_offleave(e,t){confirm("B\u1ea1n c\xf3 mu\u1ed1n x\xf3a ca \u0111\u0103ng k\xed trong ng\xe0y "+t+" ?")&&this.shiftExchangeEmployeeService.deleteExchangeAndOffLeave(e,t).subscribe(e=>{e.code===f.a.Success?(this.toastr.success(e.message),this.checkTabAndSearch()):e.code===f.a.Error?this.toastr.error(e.message):this.toastr.warning(e.message)})}activeTab(e){this.activedTab=e}changeCity(e){this.shiftExchangeEmployeeService.getDepartment(e).subscribe(e=>{this.initData.listDepartment=e.listDepartment,this.initData.listUser=e.listUser,null!=this.initData.listDepartment&&this.initData.listDepartment.length>0&&(this.filterCondition.departmentId=this.initData.listDepartment[0].id),null!=this.initData.listUser&&this.initData.listUser.length>0&&(this.filterCondition.employeeId=this.initData.listUser[0].employeeId)})}changeDepartment(e){this.shiftExchangeEmployeeService.getUsers(e).subscribe(e=>{this.initData.listUser=e.listUser,null!=this.initData.listUser&&this.initData.listUser.length>0&&(this.filterCondition.employeeId=this.initData.listUser[0].employeeId)})}uploadFile(e){0!=e.length?this.shiftExchangeEmployeeService.uploadFileShiftRegister(e[0]).subscribe(e=>{e.code===f.a.Success?(this.listMessage=[],null!=e.data&&e.data.length>0&&(this.listMessage=e.data),this.listMessage.length>0&&this.modalWarningImportExcel.show()):e.code===f.a.Error?this.toastr.error(e.message):this.toastr.warning(e.message)}):this.toastr.warning("B\u1ea1n ph\u1ea3i b\u1ed5 sung file ca l\xe0m vi\u1ec7c c\u1ee7a nh\xe2n vi\xean .")}}return e.\u0275fac=function(t){return new(t||e)(s.ac(n.c),s.ac(n.a),s.ac(l),s.ac(y.b))},e.\u0275cmp=s.Ub({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&s.Yc(b,1),2&e){let e;s.Hc(e=s.oc())&&(t.modalWarningImportExcel=e.first)}},features:[s.Nb([l,c.e])],decls:69,vars:11,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"col-sm-3"],[1,"form-group"],[1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Th\xe1ng","type","month",1,"form-control",2,"padding-right","0px",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-success",3,"click"],[1,"fa","fa-search"],["class","row",4,"ngIf"],[1,"col-md-12"],["type","button","class","btn btn-block btn-primary",3,"click",4,"ngIf"],[1,"row",2,"margin-top","10px"],[1,"col-md-12","mb-4"],["heading","Th\xf4ng tin",3,"selectTab"],[1,"container-responsive"],[1,"table"],[1,"hide-element-in-phone"],[4,"ngFor","ngForOf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["warningImportExcel","bs-modal"],["role","document",1,"modal-dialog","modal-warning"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],[3,"value"],[1,"col-md-3"],["accept",".xlsx","name","formFile","type","file",2,"width","100%"],["file",""],[1,"fa","fa-file-excel-o"],["type","button",1,"btn","btn-block","btn-primary",3,"click"],[1,"fa","fa-plus"],[2,"width","100%"],[1,"hide-element-out-phone",2,"width","100%","text-align","center","margin-top","10px"],["title","T\u1ea1o/s\u1eeda ca l\xe0m vi\u1ec7c",3,"href",4,"ngIf"],["href","javascript:void(0);","style","color: red;",3,"click",4,"ngIf"],[4,"ngIf","ngIfElse"],["hasNoShiftExChange",""],["title","T\u1ea1o/s\u1eeda ca l\xe0m vi\u1ec7c",3,"href"],[1,"fa","fa-edit",2,"font-size","20px"],["href","javascript:void(0);",2,"color","red",3,"click"],[1,"fa","fa-trash",2,"font-size","20px"],["style","font-size: 0.875rem;font-weight: 200;line-height: 1.5;","class","badge badge-success",4,"ngFor","ngForOf"],["style","font-size: 0.875rem;font-weight: 200;line-height: 1.5;","class","badge badge-danger",3,"ngClass",4,"ngFor","ngForOf"],[1,"badge","badge-success",2,"font-size","0.875rem","font-weight","200","line-height","1.5"],[1,"badge","badge-danger",2,"font-size","0.875rem","font-weight","200","line-height","1.5",3,"ngClass"],[1,"badge","badge-warning",2,"font-size","0.875rem","font-weight","200","line-height","1.5","color","white"],["style","padding-left: 25px;",4,"ngFor","ngForOf"],[2,"padding-left","25px"],[4,"ngIf"]],template:function(e,t){1&e&&(s.gc(0,"div",0),s.gc(1,"div",1),s.gc(2,"div",2),s.gc(3,"div",3),s.gc(4,"div",4),s.Uc(5,"T\xecm ki\u1ebfm"),s.fc(),s.gc(6,"div",5),s.gc(7,"div",1),s.gc(8,"div",6),s.gc(9,"div",7),s.gc(10,"select",8),s.nc("ngModelChange",function(e){return t.filterCondition.cityId=e})("ngModelChange",function(e){return t.changeCity(e)}),s.Sc(11,I,2,2,"option",9),s.fc(),s.fc(),s.fc(),s.gc(12,"div",6),s.gc(13,"div",7),s.gc(14,"select",8),s.nc("ngModelChange",function(e){return t.filterCondition.departmentId=e})("ngModelChange",function(e){return t.changeDepartment(e)}),s.Sc(15,C,2,2,"option",9),s.fc(),s.fc(),s.fc(),s.gc(16,"div",6),s.gc(17,"div",7),s.gc(18,"select",8),s.nc("ngModelChange",function(e){return t.filterCondition.employeeId=e}),s.Sc(19,D,2,2,"option",9),s.fc(),s.fc(),s.fc(),s.gc(20,"div",6),s.gc(21,"div",7),s.gc(22,"input",10),s.nc("ngModelChange",function(e){return t.filterCondition.monthInFormat=e}),s.fc(),s.fc(),s.fc(),s.gc(23,"div",6),s.gc(24,"div",7),s.gc(25,"button",11),s.nc("click",function(){return t.checkTabAndSearch()}),s.bc(26,"i",12),s.Uc(27," T\xecm ki\u1ebfm "),s.fc(),s.fc(),s.fc(),s.fc(),s.fc(),s.fc(),s.fc(),s.gc(28,"div",2),s.gc(29,"div",3),s.gc(30,"div",4),s.Uc(31,"Danh s\xe1ch th\u1eddi gian \u0111\u0103ng k\xed"),s.fc(),s.gc(32,"div",5),s.Sc(33,O,11,0,"div",13),s.gc(34,"div",1),s.gc(35,"div",14),s.gc(36,"div",7),s.Sc(37,T,3,0,"button",15),s.fc(),s.fc(),s.fc(),s.gc(38,"div",16),s.gc(39,"div",17),s.gc(40,"tabset"),s.gc(41,"tab",18),s.nc("selectTab",function(){return t.activeTab(1),t.checkTabAndSearch()}),s.gc(42,"div",19),s.gc(43,"table",20),s.gc(44,"thead"),s.gc(45,"tr"),s.gc(46,"th"),s.Uc(47,"Ng\xe0y"),s.fc(),s.gc(48,"th"),s.Uc(49,"Th\u1eddi gian l\xe0m vi\u1ec7c"),s.fc(),s.gc(50,"th",21),s.Uc(51,"Thao t\xe1c"),s.fc(),s.fc(),s.fc(),s.gc(52,"tbody"),s.Sc(53,N,16,10,"tr",22),s.fc(),s.fc(),s.fc(),s.fc(),s.fc(),s.fc(),s.fc(),s.fc(),s.fc(),s.fc(),s.fc(),s.fc(),s.gc(54,"div",23,24),s.gc(56,"div",25),s.gc(57,"div",26),s.gc(58,"div",27),s.gc(59,"h4",28),s.Uc(60,"L\u1ed7i d\u1eef li\u1ec7u Import"),s.fc(),s.gc(61,"button",29),s.nc("click",function(){return t.modalWarningImportExcel.hide()}),s.gc(62,"span",30),s.Uc(63,"\xd7"),s.fc(),s.fc(),s.fc(),s.gc(64,"div",31),s.Sc(65,_,6,3,"div",22),s.fc(),s.gc(66,"div",32),s.gc(67,"button",33),s.nc("click",function(){return t.modalWarningImportExcel.hide()}),s.Uc(68,"Close"),s.fc(),s.fc(),s.fc(),s.fc(),s.fc()),2&e&&(s.Ob(10),s.yc("ngModel",t.filterCondition.cityId),s.Ob(1),s.yc("ngForOf",t.initData.listCity),s.Ob(3),s.yc("ngModel",t.filterCondition.departmentId),s.Ob(1),s.yc("ngForOf",t.initData.listDepartment),s.Ob(3),s.yc("ngModel",t.filterCondition.employeeId),s.Ob(1),s.yc("ngForOf",t.initData.listUser),s.Ob(3),s.yc("ngModel",t.filterCondition.monthInFormat),s.Ob(11),s.yc("ngIf",t.checkShiftTeamLead),s.Ob(4),s.yc("ngIf",t.checkShiftTeamLead),s.Ob(16),s.yc("ngForOf",t.lstSchedule),s.Ob(12),s.yc("ngForOf",t.listMessage))},directives:[u.v,u.m,u.p,c.l,u.c,c.m,v.d,v.a,S.a,u.q,u.y,c.k],pipes:[c.e],encapsulation:2}),e})();class H{constructor(){}}class ${constructor(){this.listUser=[],this.listShiftCate=[]}listShiftCateInDropDown(){if(null==this.listShiftCate||0===this.listShiftCate.length)return[];let e=[];return this.listShiftCate.forEach(t=>{let i=new H;i.id=t.Key,i.itemName=t.Value,e.push(i)}),e}}class q{constructor(){}}var V=i("Fzii"),z=i("e/mZ");function K(e,t){if(1&e&&(s.gc(0,"option",29),s.Uc(1),s.fc()),2&e){const e=t.$implicit;s.zc("value",e.id),s.Ob(1),s.Vc(e.cityName)}}function W(e,t){1&e&&(s.gc(0,"div"),s.Uc(1,"B\u1ea1n ph\u1ea3i ch\u1ecdn chi nh\xe1nh"),s.fc())}function G(e,t){if(1&e&&(s.gc(0,"div",30),s.Sc(1,W,2,0,"div",31),s.fc()),2&e){s.rc();const e=s.Ic(14);s.Ob(1),s.yc("ngIf",e.errors.required)}}function X(e,t){if(1&e&&(s.gc(0,"option",29),s.Uc(1),s.fc()),2&e){const e=t.$implicit;s.zc("value",e.id),s.Ob(1),s.Vc(e.name)}}function j(e,t){1&e&&(s.gc(0,"div"),s.Uc(1,"B\u1ea1n ph\u1ea3i ch\u1ecdn ph\xf2ng ban"),s.fc())}function Y(e,t){if(1&e&&(s.gc(0,"div",30),s.Sc(1,j,2,0,"div",31),s.fc()),2&e){s.rc();const e=s.Ic(23);s.Ob(1),s.yc("ngIf",e.errors.required)}}function J(e,t){if(1&e&&(s.gc(0,"option",29),s.Uc(1),s.fc()),2&e){const e=t.$implicit;s.zc("value",e.employeeId),s.Ob(1),s.Vc(e.userName)}}function Q(e,t){1&e&&(s.gc(0,"div"),s.Uc(1,"B\u1ea1n ph\u1ea3i ch\u1ecdn nh\xe2n vi\xean"),s.fc())}function Z(e,t){if(1&e&&(s.gc(0,"div",30),s.Sc(1,Q,2,0,"div",31),s.fc()),2&e){s.rc();const e=s.Ic(34);s.Ob(1),s.yc("ngIf",e.errors.required)}}function ee(e,t){1&e&&(s.gc(0,"div"),s.Uc(1,"B\u1ea1n ph\u1ea3i ch\u1ecdn ng\xe0y b\u1eaft \u0111\u1ea7u"),s.fc())}function te(e,t){1&e&&(s.gc(0,"div"),s.Uc(1,"Ng\xe0y b\u1eaft \u0111\u1ea7u ph\u1ea3i nh\u1ecf h\u01a1n ho\u1eb7c b\u1eb1ng ng\xe0y k\u1ebft th\xfac"),s.fc())}function ie(e,t){if(1&e&&(s.gc(0,"div",30),s.Sc(1,ee,2,0,"div",31),s.Sc(2,te,2,0,"div",31),s.fc()),2&e){const e=s.rc(),t=s.Ic(65);s.Ob(1),s.yc("ngIf",t.invalid&&t.errors.required),s.Ob(1),s.yc("ngIf",e.compareDateIsInvalid())}}function ce(e,t){1&e&&(s.gc(0,"div"),s.Uc(1,"B\u1ea1n ph\u1ea3i ch\u1ecdn ng\xe0y k\u1ebft th\xfac"),s.fc())}function ne(e,t){if(1&e&&(s.gc(0,"div",30),s.Sc(1,ce,2,0,"div",31),s.fc()),2&e){s.rc();const e=s.Ic(75);s.Ob(1),s.yc("ngIf",e.errors.required)}}let oe=(()=>{class e{constructor(e,t,i,c){this.router=e,this.activatedRoute=t,this.shiftExchangeEmployeeService=i,this.toastr=c,this.shiftCategoryCodeSetting={singleSelection:!1,enableCheckAll:!1,text:"L\u1ef1a ch\u1ecdn m\xe3 ca",classes:"myclass custom-class"},this.offTypeSetting={singleSelection:!1,enableCheckAll:!1,text:"L\u1ef1a ch\u1ecdn m\xe3 ph\xe9p",classes:"myclass custom-class"},this.offStatusSetting={singleSelection:!1,enableCheckAll:!1,text:"Ch\u1ecdn tr\u1ea1ng th\xe1i ph\xe9p",classes:"myclass custom-class"},this.model=new q,this.initData=new $,this.listSelectPolicy=[],this.listShiftCateInDropDown=[],this.listOffTypeInDropDown=[],this.isEdit=!1,this.listOffStatusInDropDown=[];const n=new H;n.id="0",n.itemName="Ngh\u1ec9 kh\xf4ng l\u01b0\u01a1ng",this.listOffStatusInDropDown.push(n);const o=new H;o.id="1",o.itemName="Ngh\u1ec9 c\xf3 l\u01b0\u01a1ng",this.listOffStatusInDropDown.push(o);const s=new H;s.id="2",s.itemName="Ngh\u1ec9 n\u1eeda ch\u1ebf \u0111\u1ed9",this.listOffStatusInDropDown.push(s)}ngOnInit(){let e=0,t="";this.activatedRoute.queryParams.subscribe(i=>{void 0!==i.employeeId&&(e=parseInt(i.employeeId,10)),void 0!==i.workDate&&(t=i.workDate)}),e>0&&""!=t?(this.isEdit=!0,this.shiftExchangeEmployeeService.initEdit(e,t).subscribe(e=>{if(e.code===f.a.Success){if(this.initData=e.data,this.model.id=e.data.shiftExchangeInfo.id,this.model.cityId=e.data.selectCityId,this.model.departmentId=e.data.selectDepartmentId,this.model.employeeId=e.data.shiftExchangeInfo.employeeId,this.model.fromTime=e.data.shiftExchangeInfo.fromTime,this.model.toTime=e.data.shiftExchangeInfo.toTime,this.model.offStatus=e.data.shiftExchangeInfo.offStatus,null==this.model.offStatus)this.listSelectPolicy=[];else{this.listSelectPolicy=[],this.listOffTypeInDropDown=[];const t=e.data.shiftExchangeInfo.selectedOffStatus;if(this.model.selectedOffStatus=[],null!=t||t.length>0){for(let e=0;e<t.length;e++)"1"==t[e]?this.initData.listOffHasSalary.map((e,t)=>{this.listSelectPolicy.push(e)}):"2"==t[e]?this.initData.listBothHasAndHasNoSalary.map((e,t)=>{this.listSelectPolicy.push(e)}):this.initData.listOffHasNoSalary.map((e,t)=>{this.listSelectPolicy.push(e)});this.listSelectPolicy.forEach(e=>{let t=new H;t.id=e.Key,t.itemName=e.Value,this.listOffTypeInDropDown.push(t)});for(let e=0;e<t.length;e++)for(let i=0;i<this.listOffStatusInDropDown.length;i++)this.listOffStatusInDropDown[i].id==t[e]&&this.model.selectedOffStatus.push(this.listOffStatusInDropDown[i])}else this.model.selectedOffStatus=[]}this.initData.listShiftCate.forEach(e=>{let t=new H;t.id=e.Key,t.itemName=e.Value,this.listShiftCateInDropDown.push(t)});const t=e.data.shiftExchangeInfo.selectedShiftCategoryCode;if(this.model.selectedShiftCategoryCode=[],null!=t||t.length>0)for(let e=0;e<this.listShiftCateInDropDown.length;e++)for(let i=0;i<t.length;i++)this.listShiftCateInDropDown[e].id==t[i]&&this.model.selectedShiftCategoryCode.push(this.listShiftCateInDropDown[e]);else this.model.selectedShiftCategoryCode=[];const i=e.data.shiftExchangeInfo.selectedOffType;if(this.model.selectedOffType=[],null!=i||i.length>0)for(let e=0;e<this.listOffTypeInDropDown.length;e++)for(let t=0;t<i.length;t++)this.listOffTypeInDropDown[e].id==i[t].toString()&&this.model.selectedOffType.push(this.listOffTypeInDropDown[e]);else this.model.selectedOffType=[];this.model.shiftCategoryCode=e.data.shiftExchangeInfo.shiftCategoryCode,this.model.offType=e.data.shiftExchangeInfo.offType}else e.code===f.a.Error?this.toastr.error(e.message):this.toastr.warning(e.message)})):(this.isEdit=!1,this.shiftExchangeEmployeeService.initCreate(e).subscribe(e=>{null!=e?(this.initData=e,this.listSelectPolicy=[],this.initData.listShiftCate.forEach(e=>{let t=new H;t.id=e.Key,t.itemName=e.Value,this.listShiftCateInDropDown.push(t)}),this.listSelectPolicy.forEach(e=>{let t=new H;t.id=e.Key,t.itemName=e.Value,this.listOffTypeInDropDown.push(t)}),this.model.cityId=this.initData.selectCityId,this.model.departmentId=this.initData.selectDepartmentId,this.model.employeeId=this.initData.selectEmployeeId):this.toastr.error("L\u1ed7i khi l\u1ea5y th\xf4ng tin !")}))}save(){this.model.isEdit=this.isEdit,this.model.shiftCategoryCode="",null!=this.model.selectedShiftCategoryCode&&this.model.selectedShiftCategoryCode.length>0&&this.model.selectedShiftCategoryCode.map((e,t)=>{null==this.model.shiftCategoryCode||""==this.model.shiftCategoryCode?this.model.shiftCategoryCode=e.id.toString():this.model.shiftCategoryCode+=","+e.id.toString()}),this.model.offType="",null!=this.model.selectedOffType&&this.model.selectedOffType.length>0&&this.model.selectedOffType.map((e,t)=>{null==this.model.offType||""==this.model.offType?this.model.offType=e.id.toString():this.model.offType+=","+e.id.toString()}),this.compareDateIsInvalid()||(this.model.employeeId=parseInt(this.model.employeeId.toString(),10),this.shiftExchangeEmployeeService.save(this.model).subscribe(e=>{if(e.code===f.a.Success){this.toastr.success(e.message);let t=this.model.fromTime.replace(/-/g,"").substring(0,6);this.router.navigateByUrl("/shift-exchange-employee?employeeId="+this.model.employeeId+"&month="+t)}else e.code===f.a.Error?this.toastr.error(e.message):this.toastr.warning(e.message)}))}changeEmployee(e){this.shiftExchangeEmployeeService.getShiftCategoryByEmployee(e).subscribe(e=>{e.code===f.a.Success?(this.initData.listShiftCate=e.data,this.listShiftCateInDropDown=[],this.initData.listShiftCate.forEach(e=>{let t=new H;t.id=e.Key,t.itemName=e.Value,this.listShiftCateInDropDown.push(t)}),this.model.selectedShiftCategoryCode=[],this.model.shiftCategoryCode=""):e.code===f.a.Error?this.toastr.error(e.message):this.toastr.warning(e.message)})}compareDateIsInvalid(){return null!=this.model.fromTime&&null!=this.model.toTime&&!V.a.dateLargerOrEqual(this.model.toTime,this.model.fromTime,"-","yyyy-MM-dd")}closeForm(){if(null==this.model.fromTime||""==this.model.fromTime){let e=new Date,t=e.getFullYear()+""+(e.getMonth()+1>10?e.getMonth()+1:"0"+(e.getMonth()+1));this.router.navigateByUrl("/shift-exchange-employee?employeeId="+this.model.employeeId+"&month="+t)}else{let e=this.model.fromTime.replace(/-/g,"").substring(0,6);this.router.navigateByUrl("/shift-exchange-employee?employeeId="+this.model.employeeId+"&month="+e)}}changeCity(e){this.shiftExchangeEmployeeService.getDepartment(e).subscribe(e=>{this.initData.listDepartment=e.listDepartment,this.initData.listUser=e.listUser,null!=this.initData.listDepartment&&this.initData.listDepartment.length>0&&(this.model.departmentId=this.initData.listDepartment[0].id),null!=this.initData.listUser&&this.initData.listUser.length>0&&(this.model.employeeId=this.initData.listUser[0].employeeId,this.changeEmployee(this.model.employeeId))})}changeDepartment(e){this.shiftExchangeEmployeeService.getUsers(e).subscribe(e=>{this.initData.listUser=e.listUser,null!=this.initData.listUser&&this.initData.listUser.length>0&&(this.model.employeeId=this.initData.listUser[0].employeeId,this.changeEmployee(this.model.employeeId))})}choseShiftCategoryCode(e){this.model.shiftCategoryCode="",null!=this.model.selectedShiftCategoryCode&&this.model.selectedShiftCategoryCode.length>0&&this.model.selectedShiftCategoryCode.map((e,t)=>{null==this.model.shiftCategoryCode||""==this.model.shiftCategoryCode?this.model.shiftCategoryCode=e.id:this.model.shiftCategoryCode+=","+e.id})}deselectShiftCategoryCode(e){this.model.shiftCategoryCode="",null!=this.model.selectedShiftCategoryCode&&this.model.selectedShiftCategoryCode.length>0&&this.model.selectedShiftCategoryCode.map((e,t)=>{null==this.model.shiftCategoryCode||""==this.model.shiftCategoryCode?this.model.shiftCategoryCode=e.id:this.model.shiftCategoryCode+=","+e.id})}choseShiftOffType(e){this.model.offType="",null!=this.model.selectedOffType&&this.model.selectedOffType.length>0&&this.model.selectedOffType.map((e,t)=>{null==this.model.offType||""==this.model.offType?this.model.offType=e.id:this.model.offType+=","+e.id})}deselectShiftOffType(e){this.model.offType="",null!=this.model.selectedOffType&&this.model.selectedOffType.length>0&&this.model.selectedOffType.map((e,t)=>{null==this.model.offType||""==this.model.offType?this.model.offType=e.id:this.model.offType+=","+e.id})}changeOffStatus(e){this.model.offStatus="",this.listSelectPolicy=[],this.listOffTypeInDropDown=[],null!=this.model.selectedOffStatus&&this.model.selectedOffStatus.length>0&&this.model.selectedOffStatus.map((e,t)=>{null==this.model.offStatus||""==this.model.offStatus?this.model.offStatus=e.id:this.model.offStatus+=","+e.id,"1"==e.id?this.initData.listOffHasSalary.map((e,t)=>{this.listSelectPolicy.push(e)}):"2"==e.id?this.initData.listBothHasAndHasNoSalary.map((e,t)=>{this.listSelectPolicy.push(e)}):this.initData.listOffHasNoSalary.map((e,t)=>{this.listSelectPolicy.push(e)})}),this.listSelectPolicy.forEach(e=>{let t=new H;t.id=e.Key,t.itemName=e.Value,this.listOffTypeInDropDown.push(t)}),this.model.selectedOffType=[],this.model.offType=""}}return e.\u0275fac=function(t){return new(t||e)(s.ac(n.c),s.ac(n.a),s.ac(l),s.ac(y.b))},e.\u0275cmp=s.Ub({type:e,selectors:[["ng-component"]],features:[s.Nb([l])],decls:86,vars:27,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-header"],[1,"card-body"],["name","fShiftExchange",3,"ngSubmit"],["fShiftExchange","ngForm"],[1,"col-sm-12"],[1,"form-group"],["name","cityId","required","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["cityId","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback display-block",4,"ngIf"],["name","departmentId","required","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["departmentId","ngModel"],[1,"required-label"],["name","employeeId","required","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["employeeId","ngModel"],["name","shiftCategoryCode",3,"data","ngModel","settings","ngModelChange","onSelect","onDeSelect"],["name","offStatus",3,"data","ngModel","settings","ngModelChange","onSelect","onDeSelect"],["name","offType",3,"data","ngModel","settings","ngModelChange","onSelect","onDeSelect"],["name","fromTime","required","","placeholder","date","type","date",1,"form-control",3,"readonly","ngModel","ngModelChange"],["fromTime","ngModel"],["name","toTime","required","","placeholder","date","type","date",1,"form-control",3,"readonly","ngModel","ngModelChange"],["toTime","ngModel"],[1,"col-sm-6"],["type","submit",1,"btn","btn-block","btn-primary"],["type","button",1,"btn","btn-block","btn-secondary",3,"click"],[3,"value"],[1,"invalid-feedback","display-block"],[4,"ngIf"]],template:function(e,t){if(1&e){const e=s.hc();s.gc(0,"div",0),s.gc(1,"div",1),s.gc(2,"div",2),s.gc(3,"div",3),s.bc(4,"div",4),s.gc(5,"div",5),s.gc(6,"form",6,7),s.nc("ngSubmit",function(){return s.Lc(e),s.Ic(7).form.valid&&t.save()}),s.gc(8,"div",1),s.gc(9,"div",8),s.gc(10,"div",9),s.gc(11,"label"),s.Uc(12,"Chi nh\xe1nh"),s.fc(),s.gc(13,"select",10,11),s.nc("ngModelChange",function(e){return t.changeCity(e)})("ngModelChange",function(e){return t.model.cityId=e}),s.Sc(15,K,2,2,"option",12),s.fc(),s.Sc(16,G,2,1,"div",13),s.fc(),s.fc(),s.fc(),s.gc(17,"div",1),s.gc(18,"div",8),s.gc(19,"div",9),s.gc(20,"label"),s.Uc(21,"Ph\xf2ng ban"),s.fc(),s.gc(22,"select",14,15),s.nc("ngModelChange",function(e){return t.changeDepartment(e)})("ngModelChange",function(e){return t.model.departmentId=e}),s.Sc(24,X,2,2,"option",12),s.fc(),s.Sc(25,Y,2,1,"div",13),s.fc(),s.fc(),s.fc(),s.gc(26,"div",1),s.gc(27,"div",8),s.gc(28,"div",9),s.gc(29,"label"),s.Uc(30,"Nh\xe2n vi\xean "),s.gc(31,"span",16),s.Uc(32,"*"),s.fc(),s.fc(),s.gc(33,"select",17,18),s.nc("ngModelChange",function(e){return t.changeEmployee(e)})("ngModelChange",function(e){return t.model.employeeId=e}),s.Sc(35,J,2,2,"option",12),s.fc(),s.Sc(36,Z,2,1,"div",13),s.fc(),s.fc(),s.fc(),s.gc(37,"div",1),s.gc(38,"div",8),s.gc(39,"div",9),s.gc(40,"label"),s.Uc(41,"Ca l\xe0m vi\u1ec7c "),s.gc(42,"span",16),s.Uc(43,"*"),s.fc(),s.fc(),s.gc(44,"angular2-multiselect",19),s.nc("ngModelChange",function(e){return t.model.selectedShiftCategoryCode=e})("onSelect",function(e){return t.choseShiftCategoryCode(e)})("onDeSelect",function(e){return t.deselectShiftCategoryCode(e)}),s.fc(),s.fc(),s.fc(),s.fc(),s.gc(45,"div",1),s.gc(46,"div",8),s.gc(47,"div",9),s.gc(48,"label"),s.Uc(49,"Tr\u1ea1ng th\xe1i"),s.fc(),s.gc(50,"angular2-multiselect",20),s.nc("ngModelChange",function(e){return t.model.selectedOffStatus=e})("onSelect",function(e){return t.changeOffStatus(e)})("onDeSelect",function(e){return t.changeOffStatus(e)}),s.fc(),s.fc(),s.fc(),s.fc(),s.gc(51,"div",1),s.gc(52,"div",8),s.gc(53,"div",9),s.gc(54,"label"),s.Uc(55,"M\xe3 ch\u1ebf \u0111\u1ed9"),s.fc(),s.gc(56,"angular2-multiselect",21),s.nc("ngModelChange",function(e){return t.model.selectedOffType=e})("onSelect",function(e){return t.choseShiftOffType(e)})("onDeSelect",function(e){return t.deselectShiftCategoryCode(e)}),s.fc(),s.fc(),s.fc(),s.fc(),s.gc(57,"div",1),s.gc(58,"div",8),s.gc(59,"div",9),s.gc(60,"label"),s.Uc(61,"Ng\xe0y b\u1eaft \u0111\u1ea7u "),s.gc(62,"span",16),s.Uc(63,"*"),s.fc(),s.fc(),s.gc(64,"input",22,23),s.nc("ngModelChange",function(e){return t.model.fromTime=e}),s.fc(),s.Sc(66,ie,3,2,"div",13),s.fc(),s.fc(),s.fc(),s.gc(67,"div",1),s.gc(68,"div",8),s.gc(69,"div",9),s.gc(70,"label"),s.Uc(71,"Ng\xe0y k\u1ebft th\xfac "),s.gc(72,"span",16),s.Uc(73,"*"),s.fc(),s.fc(),s.gc(74,"input",24,25),s.nc("ngModelChange",function(e){return t.model.toTime=e}),s.fc(),s.Sc(76,ne,2,1,"div",13),s.fc(),s.fc(),s.fc(),s.gc(77,"div",1),s.gc(78,"div",26),s.gc(79,"div",9),s.gc(80,"button",27),s.Uc(81,"L\u01b0u"),s.fc(),s.fc(),s.fc(),s.gc(82,"div",26),s.gc(83,"div",9),s.gc(84,"button",28),s.nc("click",function(){return t.closeForm()}),s.Uc(85,"\u0110\xf3ng"),s.fc(),s.fc(),s.fc(),s.fc(),s.fc(),s.fc(),s.fc(),s.fc(),s.fc(),s.fc()}if(2&e){const e=s.Ic(7),i=s.Ic(14),c=s.Ic(23),n=s.Ic(34),o=s.Ic(75);s.Ob(13),s.yc("disabled",t.isEdit)("ngModel",t.model.cityId),s.Ob(2),s.yc("ngForOf",t.initData.listCity),s.Ob(1),s.yc("ngIf",e.submitted&&i.invalid),s.Ob(6),s.yc("disabled",t.isEdit)("ngModel",t.model.departmentId),s.Ob(2),s.yc("ngForOf",t.initData.listDepartment),s.Ob(1),s.yc("ngIf",e.submitted&&c.invalid),s.Ob(8),s.yc("disabled",t.isEdit)("ngModel",t.model.employeeId),s.Ob(2),s.yc("ngForOf",t.initData.listUser),s.Ob(1),s.yc("ngIf",e.submitted&&n.invalid),s.Ob(8),s.yc("data",t.listShiftCateInDropDown)("ngModel",t.model.selectedShiftCategoryCode)("settings",t.shiftCategoryCodeSetting),s.Ob(6),s.yc("data",t.listOffStatusInDropDown)("ngModel",t.model.selectedOffStatus)("settings",t.offStatusSetting),s.Ob(6),s.yc("data",t.listOffTypeInDropDown)("ngModel",t.model.selectedOffType)("settings",t.offTypeSetting),s.Ob(8),s.yc("readonly",t.isEdit)("ngModel",t.model.fromTime),s.Ob(2),s.yc("ngIf",e.submitted),s.Ob(8),s.yc("readonly",t.isEdit)("ngModel",t.model.toTime),s.Ob(2),s.yc("ngIf",e.submitted&&o.invalid)}},directives:[u.x,u.n,u.o,u.v,u.u,u.m,u.p,c.l,c.m,z.a,u.c,u.q,u.y],encapsulation:2}),e})();class se{constructor(){this.offStatus=0}}class ae{constructor(){this.listEmployee=[]}}let le=(()=>{class e{constructor(e){this.httpService=e}save(e){return this.httpService.doPost(o.a.API_URL+"/shift-off-leave/save",e)}initCreate(e){return this.httpService.doGet(o.a.API_URL+"/shift-off-leave/init-create?employeeId="+e.toString())}getById(e){return this.httpService.doGet(o.a.API_URL+"/shift-off-leave/get-by-id/"+e.toString())}}return e.\u0275fac=function(t){return new(t||e)(s.kc(a.a))},e.\u0275prov=s.Wb({token:e,factory:e.\u0275fac}),e})();function fe(e,t){if(1&e&&(s.gc(0,"option",18),s.Uc(1),s.fc()),2&e){const e=t.$implicit;s.zc("value",e.employeeId),s.Ob(1),s.Vc(e.userName)}}function re(e,t){if(1&e&&(s.gc(0,"option",18),s.Uc(1),s.fc()),2&e){const e=t.$implicit;s.zc("value",e.Key),s.Ob(1),s.Vc(e.Value)}}let he=(()=>{class e{constructor(e,t,i,c){this.activatedRoute=e,this.route=t,this.shiftOffLeaveSevice=i,this.toastr=c,this.offLeaveFileCreate=new se,this.initData=new ae,this.listSelectPolicy=[]}ngOnInit(){let e="0";this.activatedRoute.params.subscribe(t=>{void 0!==t.id&&(e=t.id)}),"0"===e?this.activatedRoute.queryParams.subscribe(e=>{if(this.initData.employeeId=void 0!==e.employeeId?parseInt(e.employeeId,10):0,void 0!==e.day&&(this.initData.dayInMonth=e.day,null!=this.initData.dayInMonth&&""!==this.initData.dayInMonth)){const e=this.initData.dayInMonth.substring(0,4),t=this.initData.dayInMonth.substring(4,6),i=this.initData.dayInMonth.substring(6,8);this.offLeaveFileCreate.fromDate=e+"-"+t+"-"+i,this.offLeaveFileCreate.toDate=e+"-"+t+"-"+i}this.shiftOffLeaveSevice.initCreate(this.initData.employeeId).subscribe(e=>{null!=e&&(this.initData=e,this.offLeaveFileCreate.employeeId=this.initData.employeeId,this.offLeaveFileCreate.offStatus=0,this.listSelectPolicy=this.initData.listOffHasNoSalary,this.offLeaveFileCreate.offType=this.listSelectPolicy[0].Key)})}):this.shiftOffLeaveSevice.getById(parseInt(e,10)).subscribe(e=>{null!=e&&(this.offLeaveFileCreate.employeeId=e.employeeId,this.offLeaveFileCreate.fromDate=e.fromDate,this.offLeaveFileCreate.toDate=e.toDate,this.offLeaveFileCreate.offStatus=e.offStatus,this.offLeaveFileCreate.offType=e.offType,this.offLeaveFileCreate.id=e.id,this.initData.employeeId=e.employeeId,this.initData.listEmployee=e.listEmployee,this.initData.listOffHasNoSalary=e.listOffHasNoSalary,this.initData.listOffHasSalary=e.listOffHasSalary)})}save(){this.offLeaveFileCreate.employeeId=parseInt(this.offLeaveFileCreate.employeeId.toString(),10),this.offLeaveFileCreate.offStatus=parseInt(this.offLeaveFileCreate.offStatus.toString(),10),this.offLeaveFileCreate.offType=parseInt(this.offLeaveFileCreate.offType.toString(),10),this.shiftOffLeaveSevice.save(this.offLeaveFileCreate).subscribe(e=>{if(e.code===f.a.Success){this.toastr.success(e.message);let t=this.offLeaveFileCreate.fromDate.replace(/-/g,"").substring(0,6);this.route.navigateByUrl("/shift-exchange-employee?employeeId="+this.offLeaveFileCreate.employeeId+"&month="+t)}else e.code===f.a.Error?this.toastr.error(e.message):this.toastr.warning(e.message)})}closeForm(){this.route.navigateByUrl("/shift-exchange-employee")}changeOffStatus(e){this.listSelectPolicy=1==e?this.initData.listOffHasSalary:2==e?this.initData.listBothHasAndHasNoSalary:this.initData.listOffHasNoSalary,this.offLeaveFileCreate.offType=this.listSelectPolicy[0].Key}}return e.\u0275fac=function(t){return new(t||e)(s.ac(n.a),s.ac(n.c),s.ac(le),s.ac(y.b))},e.\u0275cmp=s.Ub({type:e,selectors:[["app-off-leave-file-create"]],features:[s.Nb([le])],decls:47,vars:7,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"col-sm-12"],[1,"form-group"],[1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","T\u1eeb ng\xe0y","type","date",1,"form-control",3,"ngModel","ngModelChange"],["placeholder","\u0110\u1ebfn ng\xe0y","type","date",1,"form-control",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","2"],[1,"col-sm-6"],["type","button",1,"btn","btn-block","btn-primary",3,"click"],["type","button",1,"btn","btn-block","btn-secondary",3,"click"],[3,"value"]],template:function(e,t){1&e&&(s.gc(0,"div",0),s.gc(1,"div",1),s.gc(2,"div",2),s.gc(3,"div",3),s.bc(4,"div",4),s.gc(5,"div",5),s.gc(6,"div",1),s.gc(7,"div",6),s.gc(8,"div",7),s.gc(9,"label"),s.Uc(10,"Nh\xe2n vi\xean"),s.fc(),s.gc(11,"select",8),s.nc("ngModelChange",function(e){return t.offLeaveFileCreate.employeeId=e}),s.Sc(12,fe,2,2,"option",9),s.fc(),s.fc(),s.fc(),s.gc(13,"div",6),s.gc(14,"div",7),s.gc(15,"label"),s.Uc(16,"T\u1eeb ng\xe0y"),s.fc(),s.gc(17,"input",10),s.nc("ngModelChange",function(e){return t.offLeaveFileCreate.fromDate=e}),s.fc(),s.fc(),s.fc(),s.gc(18,"div",6),s.gc(19,"div",7),s.gc(20,"label"),s.Uc(21,"\u0110\u1ebfn ng\xe0y"),s.fc(),s.gc(22,"input",11),s.nc("ngModelChange",function(e){return t.offLeaveFileCreate.toDate=e}),s.fc(),s.fc(),s.fc(),s.gc(23,"div",6),s.gc(24,"div",7),s.gc(25,"label"),s.Uc(26,"Tr\u1ea1ng th\xe1i"),s.fc(),s.gc(27,"select",8),s.nc("ngModelChange",function(e){return t.offLeaveFileCreate.offStatus=e})("ngModelChange",function(e){return t.changeOffStatus(e)}),s.gc(28,"option",12),s.Uc(29,"Ngh\u1ec9 kh\xf4ng l\u01b0\u01a1ng"),s.fc(),s.gc(30,"option",13),s.Uc(31,"Ngh\u1ec9 c\xf3 l\u01b0\u01a1ng"),s.fc(),s.gc(32,"option",14),s.Uc(33,"Ngh\u1ec9 n\u1eeda ch\u1ebf \u0111\u1ed9"),s.fc(),s.fc(),s.fc(),s.fc(),s.gc(34,"div",6),s.gc(35,"div",7),s.gc(36,"label"),s.Uc(37,"M\xe3 ch\u1ebf \u0111\u1ed9"),s.fc(),s.gc(38,"select",8),s.nc("ngModelChange",function(e){return t.offLeaveFileCreate.offType=e}),s.Sc(39,re,2,2,"option",9),s.fc(),s.fc(),s.fc(),s.fc(),s.gc(40,"div",1),s.gc(41,"div",15),s.gc(42,"button",16),s.nc("click",function(){return t.save()}),s.Uc(43,"L\u01b0u"),s.fc(),s.fc(),s.gc(44,"div",15),s.gc(45,"button",17),s.nc("click",function(){return t.closeForm()}),s.Uc(46,"\u0110\xf3ng"),s.fc(),s.fc(),s.fc(),s.fc(),s.fc(),s.fc(),s.fc(),s.fc()),2&e&&(s.Ob(11),s.yc("ngModel",t.offLeaveFileCreate.employeeId),s.Ob(1),s.yc("ngForOf",t.initData.listEmployee),s.Ob(5),s.yc("ngModel",t.offLeaveFileCreate.fromDate),s.Ob(5),s.yc("ngModel",t.offLeaveFileCreate.toDate),s.Ob(5),s.yc("ngModel",t.offLeaveFileCreate.offStatus),s.Ob(11),s.yc("ngModel",t.offLeaveFileCreate.offType),s.Ob(1),s.yc("ngForOf",t.listSelectPolicy))},directives:[u.v,u.m,u.p,c.l,u.c,u.q,u.y],styles:[""]}),e})();const de=[{path:"",component:B,data:{title:"Th\xf4ng tin ch\u1ea5m c\xf4ng"}},{path:"create",component:oe,data:{title:"\u0110\u0103ng k\xed th\u1eddi gian l\xe0m vi\u1ec7c"}},{path:"edit",component:oe,data:{title:"S\u1eeda th\u1eddi gian l\xe0m vi\u1ec7c"}},{path:"off-leave-file/:id",component:he,data:{title:"S\u1eeda m\xe3 ph\xe9p"}},{path:"off-leave-file",component:he,data:{title:"T\u1ea1o m\xe3 ph\xe9p"}}];let ge=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Yb({type:e}),e.\u0275inj=s.Xb({imports:[[n.g.forChild(de)],n.g]}),e})(),me=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Yb({type:e}),e.\u0275inj=s.Xb({imports:[[c.c,u.h,u.t,n.g,ge,z.b,v.c,S.b]]}),e})()}}]);